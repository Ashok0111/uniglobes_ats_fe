<!-- Breadcrumb -->
<div class="breadcrumb-card mb-25 d-md-flex align-items-center justify-content-between">
    <h5 class="mb-0">
        Discussions And Communications
    </h5>
</div>

<!-- Chat -->
<div class="row">
    <div class="col-lg-12 col-md-12">
        <mat-card
            class="daxa-card chat-card mb-25 border-radius bg-white border-none d-block"
            [class.component-dark-theme]="themeService.isDark()"
            [class.rtl-enabled]="themeService.isRTLEnabled()"
        >
            <mat-card-content>
                <div class="chat-header d-md-flex align-items-center justify-content-between">
                    <div class="user d-flex align-items-center">
                        <div class="img position-relative">
                            <img src="images/admin_user.png" class="rounded-circle" alt="user-image">
                            <span class="active-status"></span>
                        </div>
                        <div class="title">
                            <span class="d-block fw-medium">
                                Uniglobes System
                            </span>
                        </div>
                    </div>
                    <div class="buttons-list d-flex align-items-center">

                        <button type="button" class="text-body" mat-button [matMenuTriggerFor]="chatHeaderMenu">
                            <i class="material-symbols-outlined">
                                more_horiz
                            </i>
                        </button>
                        <mat-menu #chatHeaderMenu="matMenu" class="card-header-menu" xPosition="before">
                            <button mat-menu-item>
                               Follow up
                            </button>
                        </mat-menu>
                    </div>
                </div>
                <div class="border"></div>
                <div class="chat-body">
                    <ul class="list-unstyled mb-0 mt-0">
                        <li *ngFor="let message of messages" [ngClass]="{'right': message.sender == 'current user'}" class="position-relative">
                            <!-- Conditional User Image based on sender -->
                            <img *ngIf="message.sender == 'current user'" src="images/graduated.png" width="35" class="rounded-circle user" alt="user">
                            <img *ngIf="message.sender != 'current user'" src="images/admin_user.png" width="35" class="rounded-circle user" alt="user">

                            <div class="message">
                                <div>
                                    <p>{{ message.content }}</p>
                                </div>
                            </div>

                            <!-- Time formatting -->
                            <span class="time d-block text-muted">
                                {{ message.timestamp | date:'hh:mm a' }}
                            </span>
                        </li>
                    </ul>

                </div>
                <div class="chat-footer border-radius d-md-flex align-items-center">
                    <div class="buttons-list d-flex align-items-center">
                    </div>
                    <form class="position-relative">
                        <mat-form-field>
                            <mat-label>Any Questions ?.....</mat-label>
                            <input matInput [ngModelOptions]="{standalone: true}" [(ngModel)]="myQuery">
                        </mat-form-field>
                        <button mat-button  (click)="sendConvo()">
                            <i class="material-symbols-outlined">
                                send
                            </i>
                        </button>
                    </form>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>
